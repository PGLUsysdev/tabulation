<?php

require_once 'authentication.php';

$page = "competitions_results";

?>
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="description" content="Vali is a responsive and free admin theme built with Bootstrap 4, SASS and PUG.js. It's fully customizable and modular.">
    <!-- Twitter meta-->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:site" content="@pratikborsadiya">
    <meta property="twitter:creator" content="@pratikborsadiya">
    <!-- Open Graph Meta-->
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Vali Admin">
    <meta property="og:title" content="Vali - Free Bootstrap 4 admin theme">
    <meta property="og:url" content="http://pratikborsadiya.in/blog/vali-admin">
    <meta property="og:image" content="http://pratikborsadiya.in/blog/vali-admin/hero-social.png">
    <meta property="og:description" content="Vali is a responsive and free admin theme built with Bootstrap 4, SASS and PUG.js. It's fully customizable and modular.">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Main CSS-->
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/bootbox-fix.css">
    <!-- Font-icon css-->
    <link rel="stylesheet" type="text/css" href="font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="js/rangeslider/rangeslider.css">
    <title>PGLU - Tabulation System</title>
  </head>
  <body class="app sidebar-mini" ng-app="competitionsResults" ng-controller="competitionsResultsCtrl" account-profile>
    <!-- Navbar-->
    <header class="app-header"><a class="app-header__logo" href="index.html"><img class="page-logo" src="logo/ts.png"><span class="page-logo-text">Tabulation</span></a>
      <!-- Sidebar toggle button--><a class="app-sidebar__toggle" href="#" data-toggle="sidebar"></a>
      <!-- Navbar Right Menu-->
      <ul class="app-nav">
        <!-- User Menu-->
        <li class="dropdown"><a class="app-nav__item" href="#" data-toggle="dropdown"><i class="fa fa-user fa-lg"></i></a>
          <ul class="dropdown-menu settings-menu dropdown-menu-right" drop-down></ul>
        </li>
      </ul>
    </header>
    <!-- Sidebar menu-->
    <div class="app-sidebar__overlay" data-toggle="sidebar"></div>
	
    <aside class="app-sidebar">
      <div class="app-sidebar__user"><img class="app-sidebar__user-avatar" src="{{profile.picture}}" alt="User Image">
        <div>
          <p class="app-sidebar__user-name">{{profile.user}}</p>
          <p class="app-sidebar__user-designation">{{profile.description}}</p>
        </div>
      </div>
	  
	<?php require_once 'sidebar-menu.php'; ?>
    </aside>
	
    <main class="app-content">
	
      <div class="app-title">
        <div>
          <h1><i class="fa fa-trophy"></i> Competitions Results ({{activeEvent.description}})</h1>
          <p>{{views.title}}</p>		  
        </div>
        <ul class="app-breadcrumb breadcrumb">
          <li class="breadcrumb-item"><i class="fa fa-trophy fa-lg"></i></li>
          <li class="breadcrumb-item"><a href="competitions-results.html">Competitions Results</a></li>
        </ul>
      </div>
	  
      <div class="row">	  
        <div class="col-md-12">		
          <div class="tile">
			<h3 class="tile-title">Results<i class="fa fa-refresh float-right" data-toggle="tooltip" data-placement="left" title="" data-original-title="Reload Results" style="cursor: pointer;" ng-click="specialAwardsResults.results(this)"></i></h3>
			<div class="clearfix"></div>			
			<hr>
            <div class="tile-body">
				<ul class="nav nav-tabs">
					<li class="nav-item" ng-repeat="c in competitions"><a class="nav-link" ng-class="{'active': $index==views.activeTab}" data-toggle="tab" href="#competition{{$index}}" ng-click="views.activeTab=$index">{{c.description}}</a></li>
				</ul>
				<div class="tab-content">
					<div class="tab-pane fade" ng-repeat="c in competitions" ng-class="{'active': $index==views.activeTab, 'show': $index==views.activeTab}" id="competition{{$index}}">
						<form class="form-inline float-right" style="margin-top: 20px;">
							<input class="form-control mr-sm-2" type="search" placeholder="Search" ng-model="c.search" aria-label="Search">
						</form>
						<div class="clearfix"></div>
						<h4>No. of Winner(s): {{c.winners}}</h4>						
						<div class="row">
							<div class="col-md-12">								
								<ul class="nav nav-tabs" role="tablist" style="margin-top: 25px;">
									<li class="nav-item" ng-repeat="cr in c.rounds">
										<a class="nav-link" ng-class="{'active': $index==0}" data-toggle="tab" href="#cr{{cr.id}}{{$index}}" role="tab" aria-controls="cr{{cr.id}}{{$index}}">{{cr.round_description}} ({{cr.percentage}}%)</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" data-toggle="tab" href="#overall{{c.id}}" role="tab" aria-controls="overall{{cr.id}}">Overall</a>
									</li>										
								</ul>
								<div class="tab-content" style="margin-top: 15px;">
									<div class="tab-pane fade" ng-repeat="cr in c.rounds" ng-class="{'active': $index==0, 'show': $index==0}" id="cr{{cr.id}}{{$index}}">								
										<table class="table table-striped table-bordered" style="margin-top: 15px;">
											<thead>
												<tr><th ng-repeat="tr in cr.table_header">{{tr.th}}</th></tr>
											</thead>
											<tbody>
												<tr ng-repeat="crc in cr.contestants | filter:c.search">
													<td>{{crc.contestant_no}}</td>
													<td>{{crc.description}} ({{crc.contestant_name}})</td>
													<td ng-repeat="s in crc.scores">{{s.average}}</td>
													<!-- <td>{{crc.total_scores}}</td> -->
													<td>{{crc.percentage_score}}</td>
												</tr>
											</tbody>
										</table>
									</div>
									<div class="tab-pane fade" id="overall{{c.id}}">									
										<div class="float-right">
											<button class="btn btn-success" type="button" ng-click="competitionsResults.printResults(this,c,true)" data-toggle="tooltip" data-placement="left" title="" data-original-title="Print Winners"><i class="fa fa-print"></i></button>
											<button class="btn btn-info" type="button" ng-click="competitionsResults.printResults(this,c,false)" data-toggle="tooltip" data-placement="left" title="" data-original-title="Print All Contestants"><i class="fa fa-print"></i></button>
											<button class="btn btn-success" type="button" ng-click="competitionsResults.advanceContestants(this,c)" data-toggle="tooltip" data-placement="left" title="" data-original-title="Advance winners to next portion"><i class="fa fa-angle-double-right"></i></button>
											<button class="btn btn-danger" type="button" ng-click="competitionsResults.printTies(this,c)" data-toggle="tooltip" data-placement="left" title="" data-original-title="Print Tied Contestants"><i class="fa fa-print"></i></button>
											<button class="btn btn-danger" type="button" ng-click="competitionsResults.resolveTies(this,c)" data-toggle="tooltip" data-placement="left" title="" data-original-title="Resolve Tied Contestants"><i class="fa fa-plus"></i></button>
											<button class="btn btn-danger" type="button" ng-click="competitionsResults.clearTies(this,c)" data-toggle="tooltip" data-placement="left" title="" data-original-title="Clear Score Adjustments"><i class="fa fa-minus"></i></button>										
											<button class="btn btn-warning" type="button" ng-click="competitionsResults.competitionIndividualResults(this,c)" data-toggle="tooltip" data-placement="left" title="" data-original-title="Generate Individual Results"><i class="fa fa-certificate"></i></button>											
										</div>
										<div class="clearfix"></div>										
										<table class="table table-striped table-bordered" style="margin-top: 15px;">
											<thead>
												<tr><th ng-repeat="tr in c.overall.table_header">{{tr.th}}</th></tr>
											</thead>
											<tbody>
												<tr ng-repeat="crc in c.overall.contestants | filter:c.search" ng-class="{'tied': crc.tied.isTied}">
													<td>{{crc.contestant_no}}</td>
													<td>{{crc.description}} ({{crc.contestant_name}})</td>
													<td>{{crc.competition_total}}</td>
													<td>{{crc.adj}}</td>
													<td>{{$index+1}}</td>
													<td>{{crc.tied.remarks}}</td>
												</tr>												
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>

					</div>
				</div>
			</div>
		  </div>
        </div>
      </div>
	  
    </main>
    <!-- Essential javascripts for application to work-->
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/main.js"></script>
    <!-- The javascript plugin to display page loading on top-->
    <script src="js/plugins/pace.min.js"></script>
    <script src="js/bootbox/bootbox.min.js"></script>
	<script src="js/growl/jquery.bootstrap-growl.min.js"></script>	
	<script src="js/blockui/jquery.blockUI.js"></script>	
	<script src="jspdf/jspdf.min.js"></script>	
	<!-- <script src="jspdf/jspdf.plugin.autotable.js"></script>	 -->
	<script src="jspdf/jspdf.plugin.autotable-3.2.11.js"></script>	
	<script src="js/rangeslider/rangeslider.js"></script>
    <!-- Page specific javascripts-->
  <!-- angularjs -->
  <script src="angular/angular.min.js"></script>
  <script src="angular/angular-route.min.js"></script>
  <script src="angular/angular-sanitize.min.js"></script>
  <script src="angular/ui-bootstrap-tpls-3.0.0.min.js"></script>
  <!-- modules -->
  <script src="modules/bootstrap-modal.js"></script>
  <script src="modules/account.js"></script>
  <script src="modules/validate.js"></script>
  <script src="modules/growl.js"></script>
  <script src="modules/blockui.js"></script>
  <script src="modules/tooltip.js"></script>
  <script src="modules/notifications.js"></script>
  <script src="modules/jspdf.js"></script>
  <script src="modules/active-event.js"></script>
  <script src="modules/competitions-results.js"></script>
  <!-- controller -->
  <script src="controllers/competitions-results.js"></script>
  </body>
</html>